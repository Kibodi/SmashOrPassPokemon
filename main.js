"use strict";var __awaiter$1=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function a(t){try{h(s.next(t))}catch(t){o(t)}}function r(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}h((s=s.apply(t,e||[])).next())}))};class PokemonGetter{pokemonName(t,e){return __awaiter$1(this,void 0,void 0,(function*(){const n=yield fetch(`https://pokeapi.co/api/v2/pokemon-species/${t}`),s=yield n.json();for(const t of s.names)if("de"==t.language.name&&"ger"==e)return t.name;return s.name[0].toUpperCase()+s.name.slice(1)}))}pokemonArt(t,e){return e?`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/shiny/${t}.png`:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${t}.png`}pokemonCount(){return __awaiter$1(this,void 0,void 0,(function*(){const t=yield fetch("https://pokeapi.co/api/v2/pokemon-species");return(yield t.json()).count}))}}var __awaiter=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function a(t){try{h(s.next(t))}catch(t){o(t)}}function r(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}h((s=s.apply(t,e||[])).next())}))};class Game{constructor(){this.smashArray=[],this.passArary=[],this.stage=1,this.pokemonCount,this.currentPokemon,this.PokeGetter=new PokemonGetter,this.poke_container=document.getElementById("poke_container"),this.titelrino=document.getElementById("titelrino"),this.statsDiv=document.getElementById("stats"),this.buttons=document.getElementById("buttons"),this.imgId,this.h1Id,this.lang_smash,this.lang_pass,this.shiny=!1}run(){return __awaiter(this,void 0,void 0,(function*(){this.pokemonCount=yield this.PokeGetter.pokemonCount(),this.currentPokemon=yield this.PokeGetter.pokemonName(this.stage,this.lang);var t=document.createElement("h1");t.id="poketitle",this.h1Id=t.id,t.innerHTML=this.currentPokemon+" #"+this.stage+`/#${this.pokemonCount}`;var e=document.createElement("img");e.id="pokeart",this.imgId=e.id,e.src=this.PokeGetter.pokemonArt(this.stage,this.shiny),e.onload=()=>this.enableButtons(),e.addEventListener("click",(()=>{this.disableButtons(),this.shiny=!this.shiny,this.updateImage(this.imgId)}));var n=document.createElement("div");n.id="artwork",n.appendChild(e),document.getElementById("titelrino").appendChild(t),this.poke_container.appendChild(n),this.poke_container.appendChild(document.createElement("br"));var s=document.createElement("button");s.textContent="SMASH",s.id="smashButton",s.onclick=()=>this.update(this.statS,this.smashArray),this.buttons.appendChild(s);var i=document.createElement("button");i.textContent="PASS",i.id="passButton",i.onclick=()=>this.update(this.statP,this.passArary),this.buttons.appendChild(i);var o=document.createElement("p");o.id="statSNum",o.textContent="Smash: "+this.passArary.length,this.statsDiv.appendChild(o),this.statsDiv.appendChild(document.createElement("br")),this.statSNum=document.getElementById("statSNum");var a=document.createElement("p");a.id="statPNum",a.textContent="Pass: "+this.passArary.length,this.statsDiv.appendChild(a),this.statsDiv.appendChild(document.createElement("br")),this.statPNum=document.getElementById("statPNum");var r=document.createElement("p");r.id="statS",r.textContent=this.lang_smash,this.statsDiv.appendChild(r),this.statsDiv.appendChild(document.createElement("br")),this.statS=document.getElementById("statS");var h=document.createElement("p");h.id="statP",h.textContent=this.lang_pass,this.statsDiv.appendChild(h),this.statsDiv.appendChild(document.createElement("br")),this.statP=document.getElementById("statP")}))}update(t,e){return __awaiter(this,void 0,void 0,(function*(){this.disableButtons(),this.stage<=this.pokemonCount&&(t.textContent+=this.currentPokemon+", ",e.push(this.currentPokemon),this.stage++),document.getElementById("statSNum").textContent=this.lang_smash+this.smashArray.length,document.getElementById("statPNum").textContent=this.lang_pass+this.passArary.length,this.stage>this.pokemonCount?(document.getElementById("buttons").removeChild(document.getElementById("passButton")),document.getElementById("buttons").removeChild(document.getElementById("smashButton")),document.getElementById("artwork").removeChild(document.getElementById("pokeart")),document.getElementById("titelrino").removeChild(document.getElementById("poketitle")),document.getElementById("poke_container").removeChild(document.getElementById("artwork"))):(this.currentPokemon=yield this.PokeGetter.pokemonName(this.stage,this.lang),this.updateImage("pokeart"))}))}updateImage(t){this.shiny&&this.imageExists(this.PokeGetter.pokemonArt(this.stage,!0))?(document.getElementById(this.h1Id).innerHTML="Shiny "+this.currentPokemon+" #"+this.stage+`/#${this.pokemonCount}`,document.getElementById(t).src=this.PokeGetter.pokemonArt(this.stage,!0)):(document.getElementById(this.h1Id).innerHTML=this.currentPokemon+" #"+this.stage+`/#${this.pokemonCount}`,document.getElementById(t).src=this.PokeGetter.pokemonArt(this.stage,!1))}imageExists(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!==e.status}enableButtons(){document.getElementById("smashButton").removeAttribute("disabled"),document.getElementById("passButton").removeAttribute("disabled")}disableButtons(){document.getElementById("smashButton").setAttribute("disabled","disabled"),document.getElementById("passButton").setAttribute("disabled","disabled")}}class GameGerman extends Game{constructor(){super(),this.lang="ger",this.lang_smash="Würde Smashen: ",this.lang_pass="Würde nicht Smashen: "}}class GameEnglish extends Game{constructor(){super(),this.lang="eng",this.lang_smash="Would Smash: ",this.lang_pass="Would not Smash: "}}class Opener{constructor(){this.message=document.getElementById("welcome_message")}}class Intro extends Opener{constructor(){super(),this.lang,this.heading,this.welcome,this.start="start",this.game}startIntro(t){var e=document.createElement("p"),n=document.createElement("button");t.textContent=this.heading,e.textContent=this.welcome,n.id="startbutton",n.textContent="Start",n.onclick=()=>{this.message.removeChild(t),this.message.removeChild(e),this.message.removeChild(n),this.game.run()},this.message.appendChild(e),this.message.appendChild(n)}}class IntroGerman extends Intro{constructor(){super(),this.lang="ger",this.heading="Willkommen zu Smash or Pass Pokemon!",this.welcome="Oder wie ich es nenne: Der Tiefpunkt meiner Karriere als Programmierer. In diesem Spiel geht es darum zu bewerten, ob DU mit dem gezeigten Pokemon gerne schlafen möchtest. Smash heißt Ja und Pass heißt Nein!",this.game=new GameGerman}}class IntroEnglish extends Intro{constructor(){super(),this.lang="eng",this.heading="Welcome to Smash or Pass Pokemon!",this.welcome="Or as I call it: The low point of my career as a programmer. This game is about evaluating whether YOU would like to have sex with the Pokemon shown. Smash means yes and pass means no!",this.game=new GameEnglish}}class Starter extends Opener{constructor(){super(),this.intGer=new IntroGerman,this.intEng=new IntroEnglish}start(){var t=document.createElement("h1"),e=document.createElement("button"),n=document.createElement("button");t.id="schrift",t.textContent="Select Language",this.message.appendChild(t),e.id="ger",e.textContent="Deutsch",e.onclick=()=>{this.delete_buttons(e,n),this.intGer.startIntro(t)},this.message.appendChild(e),n.id="en",n.textContent="English",n.onclick=()=>{this.delete_buttons(e,n),this.intEng.startIntro(t)},this.message.appendChild(n)}delete_buttons(t,e){this.message.removeChild(t),this.message.removeChild(e)}}let start=new Starter;document.body.onload=start.start.bind(start);